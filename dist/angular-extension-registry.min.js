angular.module("extension-registry",["extension-registry-utils"]),function(){"use strict";angular.module("extension-registry-utils",[]).constant("extensionRegistryUtils",function(n){var t="[object Number]",e="[object Array]",r="[object Object]",i="[object Function]",o="[object String]",u=Function.prototype.bind.bind(Function.prototype.call),s=u(String.prototype.split),c=u(Object.prototype.toString),a=function(n){return c(n)===o},l=function(n){return c(n)===e},f=function(n){return c(n)===r},p=function(n){return c(n)===t},d=function(n){return c(n)===i},g=function(n){return p(n)&&n!=+n},m=function(t){return t===n},h=function(n){return null===n},y=function(n){return null==n},x=u(Array.prototype.push),v=u(Array.prototype.slice),b=u(Array.prototype.sort),N=function(n,t){for(var e=0;e<n.length;e++)t(n[e],e,n)},$=function(n,t){for(var e=[],r=0;r<n.length;r++)e.push(t(n[r],r,n));return e},_=function(n,t){for(var e=[],r=0;r<n.length;r++)t(n[r],r,n)&&e.push(n[r]);return e},A=function(n,t,e){for(var r=0;r<n.length;r++)e=t(e,n[r],r,n);return e},j=function(){var n=arguments[0],t=v(arguments,1),e=[];return N(t,function(t){N(n,function(n){n===t&&e.push(!0)})}),e.length===t.length},w=function(n){var t=[];return N(n,function(n){t=l(n)?t.concat(w(n)):t.concat(n)}),t},F=function(n){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t},R=function(n){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(n[e]);return t};return{unbind:u,split:s,push:x,slice:v,sort:b,contains:j,each:N,map:$,reduce:A,filter:_,flatten:w,ownKeys:F,toArray:R,isString:a,isFunction:d,isObject:f,isNumber:p,isNaN:g,isNull:h,isUndefined:m,isNil:y}}())}(),function(){"use strict";angular.module("extension-registry").provider("extensionRegistry",["extensionRegistryUtils",function(n){var t={},e={},r=1e3,i=n.push,o=n.split,u=n.slice,s=n.sort,c=n.each,a=n.map,l=n.contains,f=n.filter,p=n.flatten,d=n.reduce,g=n.ownKeys,m=n.toArray,h=n.isFunction,y=n.isNaN,x=n.isString,v=n.isNumber,b=n.isUndefined,N=-9999,$=function(n){var t=Number(n);return y(t)?N:t},_=function(n){return y(n)?N:v(n)?n:x(n)?$(n):b(n)?-1:N},A=function(){c(m(e),function(n){n&&n()})},j=function(n,e){var i=r++;return t[n]||(t[n]={}),e&&h(e)&&(t[n][i]=e,A()),{_name:n,_key:i,remove:function(){delete t[n][i],A()}}},w=function(n){delete t[n._name][n._key],A()},F=function(){return t},R=function(){t={}};this.add=j,this.dump=F,this.clean=R,this.$get=["$log","$q","$templateCache",function(n,c,m){return{addType:function(n,t){m.put("__extension-"+n+".html",t)},add:j,remove:w,get:function(n,e,r,m){return c.all(p(d(a(o(n," "),function(n){return t[n]}),function(n,t){return n.concat(p(a(g(t),function(n){return t[n]&&t[n](r)})))},[]))).then(function(){return d(f(p(u(arguments)),function(n){return l(e,n&&n.type)?n:void 0}),function(n,t){return n.length>=m?n:(i(n,t),s(n,function(n,t){return _(n.weight)-_(t.weight)}),n)},[])})},subscribe:function(n){var t=r++;return e[t]=n,{unsubscribe:function(){delete e[t]}}},dump:F,clean:R}}]}])}(),function(){"use strict";angular.module("extension-registry").directive("extensionPoint",["$compile","$templateCache","extensionRegistryUtils",function(n,t,e){var r=e.each,i=function(n){return"__extension-"+n+".html"};return{restrict:"EA",scope:{extensionName:"=",extensionFilters:"=",extensionArgs:"=",extensionLimit:"="},transclude:!0,controller:["$scope","$q","extensionRegistry",function(e,o,u){this.initialize=function(s,c,a){var l=function(){o.when(u.get(c,a,e.extensionArgs,Number(e.extensionLimit))).then(function(o){s.html(""),r(o,function(r){s.append(n("dom"===r.type?r.node:t.get(i(r.type)))(angular.extend(e.$new(!0),{item:r})))})})};l();var f=u.subscribe(l);e.$on("$destroy",function(){f.unsubscribe()})}}],link:function(n,t,e,r){var o=e.extensionName,u=e.extensionTypes&&e.extensionTypes.split(" ")||[],s=e.extensionArgs||{};angular.extend(n,{extTpl:i}),r.initialize(t,o,u,s)}}}])}(),function(){"use strict";angular.module("extension-registry").directive("extensionRenderer",["$compile",function(n){return{restrict:"AE",scope:{item:"=",index:"=",context:"="},templateUrl:"__extension-renderer.html",link:function(t,e){t.extTpl=function(n){return"__extension-"+n+".html"},"dom"===t.item.type&&(e.html(t.item.node),n(e.contents())(t))}}}])}();